---
/**
 * LegalLayout - Shared layout for legal pages (privacy, terms, etc.)
 * Provides consistent structure and styling for legal content
 */

import PageLayout from "./PageLayout.astro";

interface Props {
  /** Page title */
  title: string;
  /** SEO description */
  description: string;
  /** Last updated date */
  lastUpdated?: string;
  /** Breadcrumb label for current page */
  breadcrumbLabel: string;
}

const { title, description, lastUpdated, breadcrumbLabel } = Astro.props;
---

<PageLayout title={title} description={description}>
  <article class="legal-page">
    <div class="legal-container">
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <ol>
          <li><a href="/">Home</a></li>
          <li aria-current="page">{breadcrumbLabel}</li>
        </ol>
      </nav>

      <header class="legal-header">
        <h1>{title}</h1>
        {lastUpdated && <p class="last-updated">Last updated: {lastUpdated}</p>}
      </header>

      <div class="legal-content">
        <slot />
      </div>
    </div>
  </article>
</PageLayout>

<style>
  .legal-page {
    padding-block: var(--spacing-section);
  }

  .legal-container {
    max-width: var(--container-xl);
    margin-inline: auto;
    padding-inline: var(--spacing-element);
  }

  .breadcrumb {
    margin-block-end: var(--spacing-element);
  }

  .breadcrumb ol {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    list-style: none;
    margin: 0;
    padding: 0;
    font-size: var(--font-size-sm);
  }

  .breadcrumb li {
    display: flex;
    align-items: center;
    gap: 0.5rem;

    &:not(:last-child)::after {
      content: "/";
      color: var(--color-text-muted);
    }
  }

  .breadcrumb a {
    color: var(--color-text-muted);
    text-decoration: none;

    &:hover {
      color: var(--color-primary);
      text-decoration: underline;
    }
  }

  .breadcrumb [aria-current="page"] {
    color: var(--color-text);
    font-weight: var(--font-weight-medium);
  }

  .legal-header {
    margin-block-end: var(--spacing-block);
  }

  .legal-header h1 {
    font-size: var(--font-size-4xl);
    color: var(--color-primary-dark);
    margin-block-end: 0.25rem;
  }

  .last-updated {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
  }

  .legal-content {
    line-height: var(--line-height-relaxed);
  }

  /* Global styles for legal content sections */
  .legal-content :global(.policy-section) {
    margin-block-end: var(--spacing-block);
    padding-block-end: var(--spacing-block);
    border-block-end: 1px solid var(--color-border);

    &:last-child {
      border-block-end: none;
      margin-block-end: 0;
      padding-block-end: 0;
    }
  }

  .legal-content :global(.policy-section h2) {
    font-size: var(--font-size-xl);
    color: var(--color-text);
    margin-block-end: 1rem;
  }

  .legal-content :global(.policy-section h3) {
    font-size: var(--font-size-lg);
    color: var(--color-text);
    margin-block-start: 1.5rem;
    margin-block-end: 0.75rem;
  }

  .legal-content :global(.policy-section p) {
    margin-block-end: 1rem;
    color: var(--color-text);

    &:last-child {
      margin-block-end: 0;
    }
  }

  .legal-content :global(.policy-section ul) {
    margin-block-end: 1rem;
    padding-inline-start: 1.5rem;
  }

  .legal-content :global(.policy-section li) {
    margin-block-end: 0.5rem;
    color: var(--color-text);
  }

  .legal-content :global(.policy-section a) {
    color: var(--color-primary);
    text-decoration: underline;
    text-underline-offset: 0.15em;

    &:hover {
      color: var(--color-primary-dark);
    }
  }

  .legal-content :global(.highlight-note) {
    font-style: italic;
    color: var(--color-text-muted);
  }

  .legal-content :global(.highlighted-section) {
    background-color: var(--color-surface-sunken);
    padding: var(--spacing-element);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
  }

  .legal-content :global(.contact-section address) {
    font-style: normal;
  }

  .legal-content :global(.contact-info p) {
    margin-block-end: 0.5rem;
  }

  .legal-content :global(.contact-info strong) {
    color: var(--color-text);
  }
</style>
