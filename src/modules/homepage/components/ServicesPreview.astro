---
/**
 * ServicesPreview - Featured services grid on homepage
 */

import Button from '@/components/ui/Button.astro';

const services = [
  {
    title: 'General Dentistry',
    description: 'Comprehensive dental care including exams, cleanings, and preventive treatments.',
    icon: 'tooth',
    href: '/services/general-dentistry',
  },
  {
    title: 'Dental Implants',
    description: 'Permanent tooth replacement solutions with natural-looking results.',
    icon: 'implant',
    href: '/services/dental-implants',
  },
  {
    title: 'CEREC Same-Day Crowns',
    description: 'Custom crowns designed and placed in a single visit using advanced 3D technology.',
    icon: 'crown',
    href: '/services/cerec-crowns',
  },
  {
    title: 'Cosmetic Dentistry',
    description: 'Teeth whitening, veneers, and smile makeovers for your best smile.',
    icon: 'sparkle',
    href: '/services/cosmetic-dentistry',
  },
];

const iconPaths: Record<string, string> = {
  tooth: 'M12 2C8 2 6 5 6 8c0 2 1 4 1 6 0 3-1 6 2 8 1.5 1 3 0 3-2v-4c0-1 1-2 2-2s2 1 2 2v4c0 2 1.5 3 3 2 3-2 2-5 2-8 0-2 1-4 1-6 0-3-2-6-6-6h-4z',
  implant: 'M12 2v4M12 6v4M12 10v4M12 14v4M8 22h8M9 6h6M10 10h4M10 14h4',
  crown: 'M3 12l3-9 3 6 3-6 3 6 3-6 3 9M3 12v6a3 3 0 003 3h12a3 3 0 003-3v-6',
  sparkle: 'M12 2l2.4 7.2L22 12l-7.6 2.8L12 22l-2.4-7.2L2 12l7.6-2.8z',
};
---

<section class="services-preview section" aria-labelledby="services-heading">
  <div class="services-container">
    <header class="services-header">
      <h2 id="services-heading" class="services-title">Our Services</h2>
      <p class="services-subtitle">
        From routine checkups to advanced procedures, we provide comprehensive
        dental care for the whole family.
      </p>
    </header>

    <div class="services-grid grid-content">
      {services.map((service) => (
        <article class="service-card">
          <div class="service-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d={iconPaths[service.icon]} />
            </svg>
          </div>
          <h3 class="service-title">{service.title}</h3>
          <p class="service-description">{service.description}</p>
          <a href={service.href} class="service-link">
            Learn more
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <line x1="5" y1="12" x2="19" y2="12"/>
              <polyline points="12 5 19 12 12 19"/>
            </svg>
          </a>
        </article>
      ))}
    </div>

    <div class="services-cta">
      <Button href="/services" variant="outline">
        View All Services
      </Button>
    </div>
  </div>
</section>

<style>
  .services-preview {
    background-color: var(--color-surface);
    overflow-x: hidden;
  }

  .services-container {
    width: 100%;
    max-width: var(--container-xl);
    margin-inline: auto;
    padding-inline: var(--spacing-element);
    box-sizing: border-box;
  }

  .services-header {
    text-align: center;
    max-width: 600px;
    margin-inline: auto;
    margin-bottom: var(--spacing-block);
  }

  .services-title {
    margin-bottom: 1rem;
  }

  .services-subtitle {
    font-size: var(--font-size-lg);
    color: var(--color-text-muted);
    line-height: var(--line-height-relaxed);
  }

  .services-grid {
    width: 100%;
  }

  .service-card {
    /* 1:1.2 aspect ratio for proportional scaling */
    aspect-ratio: 1 / 1.2;
    display: flex;
    flex-direction: column;
    padding: 1.25rem;
    background: var(--color-surface-elevated);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--color-border);
    transition: box-shadow var(--transition-fast);
    min-width: 0; /* Prevent grid blowout */
    overflow: hidden;

    &:hover {
      box-shadow: var(--shadow-lg);
    }
  }

  @media (min-width: 640px) {
    .service-card {
      padding: 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .service-card {
      padding: 2rem;
    }
  }

  .service-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    /* Responsive icon size: mobile 48px, tablet 56px, desktop 64px */
    width: 48px;
    height: 48px;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, var(--color-primary-light), var(--color-secondary-light));
    border-radius: var(--radius-lg);
    color: var(--color-primary-dark);

    & svg {
      width: 24px;
      height: 24px;
    }
  }

  @media (min-width: 640px) {
    .service-icon {
      width: 56px;
      height: 56px;
      margin-bottom: 1.25rem;

      & svg {
        width: 28px;
        height: 28px;
      }
    }
  }

  @media (min-width: 1024px) {
    .service-icon {
      width: 64px;
      height: 64px;
      margin-bottom: 1.5rem;

      & svg {
        width: 32px;
        height: 32px;
      }
    }
  }

  .service-title {
    /* Responsive font: sm on mobile, base on tablet, xl on desktop */
    font-size: var(--font-size-sm);
    margin-bottom: 0.5rem;
    line-height: 1.3;
  }

  @media (min-width: 640px) {
    .service-title {
      font-size: var(--font-size-base);
      margin-bottom: 0.625rem;
    }
  }

  @media (min-width: 1024px) {
    .service-title {
      font-size: var(--font-size-xl);
      margin-bottom: 0.75rem;
    }
  }

  .service-description {
    /* Responsive font: xs on mobile, sm on tablet, base on desktop */
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
    line-height: var(--line-height-relaxed);
    margin-bottom: 0.75rem;
    flex-grow: 1;
    /* Limit lines on mobile */
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  @media (min-width: 640px) {
    .service-description {
      font-size: var(--font-size-sm);
      margin-bottom: 1rem;
      -webkit-line-clamp: 3;
    }
  }

  @media (min-width: 1024px) {
    .service-description {
      font-size: var(--font-size-base);
      margin-bottom: 1.5rem;
      -webkit-line-clamp: none;
    }
  }

  .service-link {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    /* Minimum touch target 48px */
    min-height: 48px;
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    color: var(--color-primary);
    text-decoration: none;
    transition: gap var(--transition-fast);
    margin-top: auto;

    & svg {
      width: 14px;
      height: 14px;
    }

    &:hover {
      gap: 0.5rem;
    }
  }

  @media (min-width: 640px) {
    .service-link {
      gap: 0.375rem;
      font-size: var(--font-size-sm);

      & svg {
        width: 16px;
        height: 16px;
      }

      &:hover {
        gap: 0.75rem;
      }
    }
  }

  .services-cta {
    display: flex;
    justify-content: center;
    margin-top: var(--spacing-block);
  }
</style>
