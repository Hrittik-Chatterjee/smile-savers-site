---
/**
 * ServiceDetail - Full service page layout
 * Displays service content, benefits, and FAQ
 */

import { render, type CollectionEntry } from "astro:content";
import Button from "@/components/ui/Button.astro";
import FAQ from "./FAQ.astro";

interface Props {
  service: CollectionEntry<"services">;
}

const { service } = Astro.props;
const { title, description, category, duration, benefits, faq } = service.data;
const { Content } = await render(service);

const categoryLabels: Record<string, string> = {
  preventive: "Preventive Care",
  cosmetic: "Cosmetic Dentistry",
  restorative: "Restorative Care",
  emergency: "Emergency Services",
};
---

<article class="service-detail">
  <!-- Breadcrumb -->
  <nav class="breadcrumb" aria-label="Breadcrumb">
    <ol>
      <li><a href="/">Home</a></li>
      <li><a href="/services">Services</a></li>
      <li aria-current="page">{title}</li>
    </ol>
  </nav>

  <!-- Hero Section -->
  <header class="service-hero">
    <span class={`category-badge category-${category}`}>
      {categoryLabels[category]}
    </span>
    <h1 class="service-title">{title}</h1>
    <p class="service-description">{description}</p>

    {
      duration && (
        <div class="service-meta">
          <span class="meta-item">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              aria-hidden="true"
            >
              <circle cx="12" cy="12" r="10" />
              <polyline points="12 6 12 12 16 14" />
            </svg>
            {duration}
          </span>
        </div>
      )
    }
  </header>

  <!-- Main Content -->
  <div class="service-content prose">
    <Content />
  </div>

  <!-- Benefits Section -->
  {
    benefits && benefits.length > 0 && (
      <section class="benefits-section" aria-labelledby="benefits-heading">
        <h2 id="benefits-heading" class="benefits-title">
          Benefits
        </h2>
        <ul class="benefits-list">
          {benefits.map((benefit) => (
            <li class="benefit-item">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
                class="check-icon"
              >
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                <polyline points="22 4 12 14.01 9 11.01" />
              </svg>
              <span>{benefit}</span>
            </li>
          ))}
        </ul>
      </section>
    )
  }

  <!-- FAQ Section -->
  {faq && faq.length > 0 && <FAQ items={faq} title={`${title} FAQ`} />}

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="cta-content">
      <h2 class="cta-title">Ready to Get Started?</h2>
      <p class="cta-description">
        Schedule your consultation today and take the first step toward a
        healthier smile.
      </p>
      <div class="cta-buttons">
        <Button href="/appointments" variant="primary">
          Book Appointment
        </Button>
        <Button href="/contact" variant="outline"> Contact Us </Button>
      </div>
    </div>
  </section>
</article>

<style>
  .service-detail {
    max-width: var(--container-lg);
    margin-inline: auto;
    padding-inline: var(--spacing-element);
  }

  /* Breadcrumb */
  .breadcrumb {
    padding-block: 1.5rem;
  }

  .breadcrumb ol {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    list-style: none;
    margin: 0;
    padding: 0;
    font-size: var(--font-size-sm);
  }

  .breadcrumb li {
    display: flex;
    align-items: center;
    gap: 0.5rem;

    &:not(:last-child)::after {
      content: "/";
      color: var(--color-text-muted);
    }
  }

  .breadcrumb a {
    color: var(--color-text-muted);
    text-decoration: none;

    &:hover {
      color: var(--color-primary);
      text-decoration: underline;
    }
  }

  .breadcrumb [aria-current="page"] {
    color: var(--color-text);
    font-weight: var(--font-weight-medium);
  }

  /* Hero */
  .service-hero {
    text-align: center;
    padding-block: var(--spacing-block);
    border-bottom: 1px solid var(--color-border);
    margin-bottom: var(--spacing-block);
  }

  .category-badge {
    display: inline-block;
    padding: 0.375rem 1rem;
    margin-bottom: 1rem;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    border-radius: var(--radius-full);
  }

  .category-preventive {
    background: #E8F5E9;
    color: #2E7D32;
  }

  .category-cosmetic {
    background: #FFF8E1;
    color: #F57C00;
  }

  .category-restorative {
    background: #E3F2FD;
    color: #1565C0;
  }

  .category-emergency {
    background: #FFEBEE;
    color: #C62828;
  }

  .service-title {
    font-size: var(--font-size-4xl);
    margin-bottom: 1rem;
  }

  .service-description {
    font-size: var(--font-size-xl);
    color: var(--color-text-muted);
    max-width: 700px;
    margin-inline: auto;
    line-height: var(--line-height-relaxed);
  }

  .service-meta {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-top: 1.5rem;
  }

  .meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: var(--font-size-base);
    color: var(--color-text-muted);
  }

  /* Content */
  .service-content {
    padding-block: var(--spacing-block);
  }

  /* Benefits */
  .benefits-section {
    padding-block: var(--spacing-block);
    background: var(--color-surface-sunken);
    margin-inline: calc(-1 * var(--spacing-element));
    padding-inline: var(--spacing-element);
  }

  .benefits-title {
    font-size: var(--font-size-3xl);
    margin-bottom: var(--spacing-element);
    text-align: center;
  }

  .benefits-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1rem;
    list-style: none;
    margin: 0;
    padding: 0;
    max-width: var(--container-lg);
    margin-inline: auto;
  }

  .benefit-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 1rem;
    background: var(--color-surface-elevated);
    border-radius: var(--radius-lg);
  }

  .check-icon {
    flex-shrink: 0;
    color: var(--color-success);
  }

  /* CTA */
  .cta-section {
    padding-block: var(--spacing-section);
    text-align: center;
  }

  .cta-content {
    max-width: 600px;
    margin-inline: auto;
  }

  .cta-title {
    font-size: var(--font-size-3xl);
    margin-bottom: 1rem;
  }

  .cta-description {
    font-size: var(--font-size-lg);
    color: var(--color-text-muted);
    margin-bottom: 2rem;
  }

  .cta-buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
  }
</style>
