---
/**
 * NearbyLocations - Internal links to nearby location pages
 * Essential for location page internal linking architecture
 */

interface LocationLink {
  neighborhood: string;
  slug: string;
}

interface Props {
  service: string;        // Current service slug
  currentNeighborhood: string;  // Current neighborhood (to exclude)
  locations?: LocationLink[];   // Optional custom list, otherwise uses defaults
  title?: string;
}

const { service, currentNeighborhood, locations, title = "Also Serving Nearby Areas" } = Astro.props;

// Default Queens neighborhoods served by Smile Savers
const defaultLocations: LocationLink[] = [
  { neighborhood: 'Woodside', slug: 'woodside' },
  { neighborhood: 'Sunnyside', slug: 'sunnyside' },
  { neighborhood: 'Jackson Heights', slug: 'jackson-heights' },
  { neighborhood: 'Maspeth', slug: 'maspeth' },
  { neighborhood: 'Elmhurst', slug: 'elmhurst' },
  { neighborhood: 'Long Island City', slug: 'long-island-city' },
  { neighborhood: 'Astoria', slug: 'astoria' },
  { neighborhood: 'Corona', slug: 'corona' },
];

const allLocations = locations || defaultLocations;
const displayLocations = allLocations.filter(loc => loc.slug !== currentNeighborhood);
---

{displayLocations.length > 0 && (
  <section class="nearby-locations" aria-labelledby="nearby-heading">
    <h2 id="nearby-heading" class="nearby-title">{title}</h2>
    <nav class="locations-grid" aria-label="Nearby service areas">
      {displayLocations.map((loc) => (
        <a href={`/${service}/${loc.slug}/`} class="location-link">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
            <circle cx="12" cy="10" r="3"/>
          </svg>
          <span>{loc.neighborhood}</span>
        </a>
      ))}
    </nav>
  </section>
)}

<style>
  .nearby-locations {
    padding-block: var(--spacing-element);
    border-top: 1px solid var(--color-border);
    margin-top: var(--spacing-element);
  }

  .nearby-title {
    font-size: var(--font-size-lg);
    margin-bottom: 1rem;
  }

  .locations-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .location-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: var(--color-surface-sunken);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-full);
    font-size: var(--font-size-sm);
    color: var(--color-text);
    text-decoration: none;
    transition: background-color var(--transition-fast), border-color var(--transition-fast);

    &:hover {
      background: var(--color-primary-light);
      border-color: var(--color-primary);
      color: var(--color-primary-dark);
    }
  }

  .location-link svg {
    color: var(--color-primary);
  }
</style>
