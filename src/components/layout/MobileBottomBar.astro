---
/**
 * MobileBottomBar - Sticky bottom bar for mobile with appointment booking
 * Only visible on mobile devices (< 768px)
 * Features: Call button + Book Online button + Accessibility button
 */

import { ctaButton } from '@/config/navigation';
import { siteConfig } from '@/config/site';
import { formatPhoneLink } from '@/lib/utils';
---

<div class="mobile-bottom-bar">
  <!-- Call Button -->
  <a href={formatPhoneLink(siteConfig.phone)} class="mobile-action-btn mobile-call-btn">
    <svg class="phone-ring-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
    </svg>
    <span>Call</span>
  </a>

  <!-- Book Online Button -->
  <a href={ctaButton.href} class="mobile-action-btn mobile-book-btn">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
      <line x1="16" y1="2" x2="16" y2="6"/>
      <line x1="8" y1="2" x2="8" y2="6"/>
      <line x1="3" y1="10" x2="21" y2="10"/>
    </svg>
    <span>Book Online</span>
  </a>

  <!-- Accessibility Button -->
  <label for="a11y-toggle" class="mobile-action-btn mobile-a11y-btn" aria-label="Accessibility settings">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <circle cx="12" cy="12" r="10"/>
      <circle cx="12" cy="8" r="2"/>
      <path d="M12 10v8"/>
      <path d="M8 14l4 2 4-2"/>
    </svg>
  </label>
</div>

<style>
  /* Phone Ring Animation */
  @keyframes phone-ring {
    0%, 100% {
      transform: rotate(0deg);
    }
    5% {
      transform: rotate(15deg);
    }
    10% {
      transform: rotate(-13deg);
    }
    15% {
      transform: rotate(14deg);
    }
    20% {
      transform: rotate(-12deg);
    }
    25% {
      transform: rotate(10deg);
    }
    30% {
      transform: rotate(0deg);
    }
  }

  .phone-ring-icon {
    animation: phone-ring 3s ease-in-out infinite;
    transform-origin: center center;
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .phone-ring-icon {
      animation: none;
    }
  }

  .mobile-bottom-bar {
    display: none;
  }

  @media (max-width: 768px) {
    .mobile-bottom-bar {
      display: flex;
      gap: 0.375rem;
      position: fixed;
      bottom: 1rem;
      left: 1rem;
      right: 1rem;
      padding: 0.5rem 0.75rem;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-xl);
      z-index: var(--z-sticky);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
      max-width: 500px;
      margin-inline: auto;
    }

    .mobile-action-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.375rem;
      padding: 0.625rem 0.75rem;
      border-radius: var(--radius-lg);
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-semibold);
      text-decoration: none;
      transition: background-color var(--transition-fast), transform var(--transition-fast);
      cursor: pointer;

      &:active {
        transform: scale(0.98);
      }

      &:focus-visible {
        outline: 2px solid var(--color-accent);
        outline-offset: 2px;
      }
    }

    /* Call Button - Outline style */
    .mobile-call-btn {
      flex: 1;
      background: var(--color-surface-elevated);
      color: var(--color-accent);
      border: 2px solid var(--color-accent);

      &:hover {
        background: rgba(44, 171, 223, 0.1);
      }
    }

    /* Book Online Button - Filled style */
    .mobile-book-btn {
      flex: 1;
      background: var(--color-accent);
      color: white;
      border: 2px solid var(--color-accent);

      &:hover {
        background: #1A95C9;
        border-color: #1A95C9;
      }
    }

    /* Accessibility Button - Icon only */
    .mobile-a11y-btn {
      flex: 0 0 auto;
      width: 44px;
      height: 44px;
      padding: 0;
      background: var(--color-primary);
      color: var(--color-text-inverted);
      border: 2px solid var(--color-primary);
      border-radius: var(--radius-full);

      &:hover {
        background: var(--color-primary-dark);
        border-color: var(--color-primary-dark);
      }
    }
  }
</style>
