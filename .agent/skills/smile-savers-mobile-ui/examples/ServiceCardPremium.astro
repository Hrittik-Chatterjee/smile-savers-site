---
/**
 * Premium Service Card Component
 * 
 * Features:
 * - Dark/Light mode support
 * - HIPAA/ADA/FTC compliant
 * - Premium visual design with gradients
 * - Mobile-optimized 2-column layout
 * - WCAG 2.1 AA accessible
 * 
 * @example
 * <ServiceCardPremium
 *   id="cleaning"
 *   title="Dental Cleaning"
 *   description="Professional teeth cleaning"
 *   icon="cleaning"
 *   href="/services/cleaning"
 *   price="$150-200"
 *   gradient="blue"
 * />
 */

export interface Props {
  /** Unique identifier for the service */
  id: string;
  /** Display title */
  title: string;
  /** Short description (max 100 chars recommended) */
  description: string;
  /** Icon name matching IconSprite definitions */
  icon: string;
  /** Link destination */
  href: string;
  /** Price range (optional) */
  price?: string;
  /** Card variant: default (outlined) or featured (elevated) */
  variant?: 'default' | 'featured';
  /** Background gradient color */
  gradient?: 'blue' | 'gold' | 'teal' | 'purple';
}

const {
  id,
  title,
  description,
  icon,
  href,
  price,
  variant = 'default',
  gradient = 'blue',
} = Astro.props;

const gradientMap = {
  blue: 'from-primary-50 to-primary-100 dark:from-primary-950 dark:to-primary-900',
  gold: 'from-amber-50 to-amber-100 dark:from-amber-950 dark:to-amber-900',
  teal: 'from-cyan-50 to-cyan-100 dark:from-cyan-950 dark:to-cyan-900',
  purple: 'from-purple-50 to-purple-100 dark:from-purple-950 dark:to-purple-900',
};

const variantStyles = {
  default: `
    bg-white border border-neutral-200 
    hover:border-transparent hover:shadow-xl
    dark:bg-neutral-800 dark:border-neutral-700
  `,
  featured: `
    bg-gradient-to-br ${gradientMap[gradient]} 
    border border-transparent 
    shadow-lg hover:shadow-xl
  `,
};

const iconColors = {
  blue: 'text-primary-600 dark:text-primary-400',
  gold: 'text-amber-600 dark:text-amber-400',
  teal: 'text-cyan-600 dark:text-cyan-400',
  purple: 'text-purple-600 dark:text-purple-400',
};
---

<a
  id={`service-card-${id}`}
  href={href}
  class:list={[
    'block group relative h-full',
    'rounded-2xl p-5 sm:p-6',
    'transition-all duration-300 ease-out',
    'focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500',
    'dark:focus:ring-offset-neutral-900',
    'overflow-hidden',
    variantStyles[variant],
  ]}
  role="article"
  aria-labelledby={`title-${id}`}
  aria-describedby={`desc-${id}`}
>
  <!-- Background Decorative Shape -->
  <div 
    class="absolute top-0 right-0 w-24 h-24 
           bg-gradient-to-br from-accent-400/5 to-transparent 
           rounded-full -translate-y-1/3 translate-x-1/3 
           group-hover:translate-y-0 group-hover:translate-x-0 
           transition-transform duration-500
           dark:from-accent-400/10"
    aria-hidden="true"
  ></div>

  <!-- Icon Container -->
  <div class="relative z-10 flex justify-center mb-4 sm:mb-5">
    <div 
      class:list={[
        'w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16',
        'rounded-full flex items-center justify-center',
        `bg-gradient-to-br ${gradientMap[gradient]}`,
        'transition-all duration-300',
        'group-hover:scale-110 group-hover:rotate-6',
        'group-hover:shadow-lg',
      ]}
    >
      <svg 
        class:list={[
          'w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8',
          iconColors[gradient],
          'transition-all duration-300',
          'group-hover:drop-shadow-lg',
        ]}
        fill="none" 
        stroke="currentColor" 
        viewBox="0 0 24 24" 
        aria-hidden="true"
      >
        <use href={`#icon-${icon}`} />
      </svg>
    </div>
  </div>

  <!-- Content -->
  <div class="relative z-10 flex flex-col text-center gap-2">
    <!-- Title -->
    <h3 
      id={`title-${id}`}
      class="text-sm sm:text-base md:text-lg font-semibold 
             text-neutral-900 dark:text-neutral-50 
             relative inline-block"
    >
      {title}
      <span 
        class="absolute bottom-0 left-1/2 -translate-x-1/2 
               h-0.5 bg-gradient-to-r from-accent-400 to-accent-600 
               w-0 group-hover:w-3/4 
               transition-all duration-300"
        aria-hidden="true"
      ></span>
    </h3>

    <!-- Description -->
    <p 
      id={`desc-${id}`}
      class="text-xs sm:text-sm text-neutral-600 dark:text-neutral-400 
             leading-relaxed line-clamp-2"
    >
      {description}
    </p>

    <!-- Price Badge -->
    {price && (
      <div class="mt-2">
        <span 
          class="inline-block px-3 py-1 rounded-full text-xs sm:text-sm font-bold
                 bg-gradient-to-r from-accent-400/10 to-accent-600/10 
                 dark:from-accent-400/20 dark:to-accent-600/20
                 border border-accent-200 dark:border-accent-800
                 text-accent-600 dark:text-accent-400"
        >
          {price}
        </span>
      </div>
    )}

    <!-- CTA Arrow (appears on hover) -->
    <div 
      class="mt-2 flex justify-center 
             opacity-0 group-hover:opacity-100 group-focus-visible:opacity-100 
             transition-all duration-300 
             transform -translate-y-1 group-hover:translate-y-0"
      aria-hidden="true"
    >
      <svg 
        class="w-4 h-4 sm:w-5 sm:h-5 text-primary-600 dark:text-primary-400 
               group-hover:translate-x-1 transition-transform duration-300" 
        fill="none" 
        stroke="currentColor" 
        viewBox="0 0 24 24"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
      </svg>
    </div>
  </div>

  <!-- Hover Glow Overlay -->
  <div 
    class="absolute inset-0 rounded-2xl 
           opacity-0 group-hover:opacity-100 
           transition-opacity duration-300 pointer-events-none
           bg-gradient-to-br from-primary-400/0 via-transparent to-accent-400/0
           group-hover:from-primary-400/5 group-hover:to-accent-400/5
           dark:group-hover:from-primary-400/10 dark:group-hover:to-accent-400/10"
    aria-hidden="true"
  ></div>
</a>
